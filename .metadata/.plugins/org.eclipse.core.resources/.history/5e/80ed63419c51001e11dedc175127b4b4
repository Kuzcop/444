/*
 * nrTransFunc.c
 *
 *  Created on: Sep 3, 2023
 *      Author: asidh
 */

#define ARM_MATH_CM4
#include "arm_math.h"
#include "main.h"

void trans_func(float *x, float *omega, float *phi){
    float x_o = 0.5;   // Initialize guess to 1
    float x_1 = 0.5;
    float tolerance = 0.00001;
    uint32_t iter = 0;
	while(1){
		x_1 = x_o - (x_o*x_o - arm_cos_f32((*omega)*(x_o) + (*phi))) / (2*x_o + (*omega) * arm_sin_f32((*omega)*(x_o) + (*phi)));
		if (fabs(x_1 - x_o) < tolerance){
			(*x) = x_o;
			break;
		}
		x_o = x_1;
		iter++;
	}

}

